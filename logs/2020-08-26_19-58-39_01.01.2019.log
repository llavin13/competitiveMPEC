RT is False
Default write of storage_offers_DA.csv just to have a file (but constraint should be inactive)
Reading model...
...model read.
creating competitive generators file...
...competitive generators recorded.
Loading data...
.. day-ahead data read.
Compiling instance...
...instance created.
Creating Offer Mitigation (model will solve as dispatch if TRUE)...
...storage offer mitigation file created
Converting model to MPEC...
...converted
NOTE: initial MIP solve with only storage competitive to get feasible solution
Solving...

Welcome to IBM(R) ILOG(R) CPLEX(R) Interactive Optimizer 12.10.0.0
  with Simplex, Mixed Integer & Barrier Optimizers
5725-A06 5725-A29 5724-Y48 5724-Y49 5724-Y54 5724-Y55 5655-Y21
Copyright IBM Corp. 1988, 2019.  All Rights Reserved.

Type 'help' for a list of available commands.
Type 'help' followed by a command name for more
information on commands.

CPLEX> Logfile 'cplex.log' closed.
Logfile 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmp90eng9mc.cplex.log' open.
CPLEX> New value for parallel optimization mode: -1
CPLEX> New value for mixed integer optimality gap tolerance: 0.01
CPLEX> New value for feasibility tolerance: 1e-09
CPLEX> New value for deterministic time limit in ticks: 100000
CPLEX> Problem 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmp084y8n0y.pyomo.lp' read.
Read time = 0.14 sec. (14.50 ticks)
CPLEX> Problem name         : C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmp084y8n0y.pyomo.lp
Objective sense      : Maximize
Variables            :   53805  [Nneg: 1,  Box: 22000,  Free: 4464,
                                 Binary: 27340]
Objective nonzeros   :    9019
Linear constraints   :  123205  [Less: 41346,  Greater: 59096,  Equal: 22763]
  Nonzeros           :  291718
  RHS nonzeros       :   67460

Variables            : Min LB: -5000.000        Max UB: 1000000.       
Objective nonzeros   : Min   : 0.1000000        Max   : 2500.000       
Linear constraints   :
  Nonzeros           : Min   : 0.1000000        Max   : 1000000.       
  RHS nonzeros       : Min   : 0.1000000        Max   : 1000000.       
CPLEX> Version identifier: 12.10.0.0 | 2019-11-26 | 843d4de2ae
CPXPARAM_Parallel                                -1
CPXPARAM_Simplex_Tolerances_Feasibility          1.0000000000000001e-09
CPXPARAM_DetTimeLimit                            100000
CPXPARAM_MIP_Tolerances_MIPGap                   0.01
Tried aggregator 3 times.
MIP Presolve eliminated 88893 rows and 19191 columns.
MIP Presolve added 3338 rows and 0 columns.
MIP Presolve modified 24784 coefficients.
Aggregator did 12968 substitutions.
Reduced MIP has 24682 rows, 21064 columns, and 70474 nonzeros.
Reduced MIP has 8323 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.16 sec. (165.58 ticks)
Probing fixed 376 vars, tightened 4028 bounds.
Probing time = 0.03 sec. (18.21 ticks)
Tried aggregator 2 times.
Detecting symmetries...
MIP Presolve eliminated 849 rows and 755 columns.
MIP Presolve modified 2999 coefficients.
Aggregator did 36 substitutions.
Reduced MIP has 23797 rows, 20273 columns, and 67908 nonzeros.
Reduced MIP has 7946 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.08 sec. (91.25 ticks)
Probing fixed 0 vars, tightened 271 bounds.
Probing time = 0.06 sec. (22.21 ticks)
Clique table members: 44067.
MIP emphasis: balance optimality and feasibility.
MIP search method: dynamic search.
Parallel mode: opportunistic, using up to 16 threads.
Root relaxation solution time = 0.31 sec. (621.96 ticks)

        Nodes                                         Cuts/
   Node  Left     Objective  IInf  Best Integer    Best Bound    ItCnt     Gap

      0     0     7078.7690    96                   7078.7690     5518         
      0     0     7078.7690    96                     Cuts: 9     5521         
      0     0     7077.4920    96                     Cuts: 4     5527         
      0     0     7077.4573    96                     Cuts: 4     5534         
      0     0     7076.1264    96                     Cuts: 2     5536         
      0     0     7076.1264    96                   Covers: 1     5537         
      0     8    infeasible                         7069.3359     5590         
Elapsed time = 3.19 sec. (2711.42 ticks, tree = 0.02 MB, solutions = 0)
*    84    25      integral     0     7050.6701     7069.3359     5690    0.26%

Cover cuts applied:  4
Implied bound cuts applied:  3
Flow cuts applied:  11
Gomory fractional cuts applied:  3

Root node processing (before b&c):
  Real time             =    2.80 sec. (2690.30 ticks)
Parallel b&c, 16 threads:
  Real time             =    0.80 sec. (247.96 ticks)
  Sync time (average)   =    0.17 sec.
  Wait time (average)   =    0.00 sec.
                          ------------
Total (root+branch&cut) =    3.59 sec. (2938.27 ticks)

Solution pool: 4 solutions saved.

MIP - Integer optimal, tolerance (0.01/1e-06):  Objective =  7.0506701473e+03
Current MIP best bound =  7.0693358514e+03 (gap = 18.6657, 0.26%)
Solution time =    3.59 sec.  Iterations = 7568  Nodes = 134 (4)
Deterministic time = 2938.42 ticks  (817.59 ticks/sec)

CPLEX> Incumbent solution written to file 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpn_ep0q3m.cplex.sol'.
CPLEX> NOTE: no warmstart specified for MIP iteration, default behavior is true
NOTE: resolving with all competitive generators using storage-only solution to warmstart
Solving...

Welcome to IBM(R) ILOG(R) CPLEX(R) Interactive Optimizer 12.10.0.0
  with Simplex, Mixed Integer & Barrier Optimizers
5725-A06 5725-A29 5724-Y48 5724-Y49 5724-Y54 5724-Y55 5655-Y21
Copyright IBM Corp. 1988, 2019.  All Rights Reserved.

Type 'help' for a list of available commands.
Type 'help' followed by a command name for more
information on commands.

CPLEX> Logfile 'cplex.log' closed.
Logfile 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpewx3zcts.cplex.log' open.
CPLEX> New value for parallel optimization mode: -1
CPLEX> New value for mixed integer optimality gap tolerance: 0.01
CPLEX> New value for feasibility tolerance: 1e-09
CPLEX> New value for deterministic time limit in ticks: 100000
CPLEX> Problem 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpo02j5mh6.pyomo.lp' read.
Read time = 0.14 sec. (14.52 ticks)
CPLEX> MIP start file 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpfvfury4m.cplex.mst' read.
CPLEX> Problem name         : C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpo02j5mh6.pyomo.lp
Objective sense      : Maximize
Variables            :   54525  [Nneg: 1,  Box: 22720,  Free: 4464,
                                 Binary: 27340]
Objective nonzeros   :    9715
Linear constraints   :  123205  [Less: 41346,  Greater: 59096,  Equal: 22763]
  Nonzeros           :  291718
  RHS nonzeros       :   67460

Variables            : Min LB: -5000.000        Max UB: 1000000.       
Objective nonzeros   : Min   : 0.1000000        Max   : 2500.000       
Linear constraints   :
  Nonzeros           : Min   : 0.1000000        Max   : 1000000.       
  RHS nonzeros       : Min   : 0.1000000        Max   : 1000000.       
CPLEX> Version identifier: 12.10.0.0 | 2019-11-26 | 843d4de2ae
CPXPARAM_Parallel                                -1
CPXPARAM_Simplex_Tolerances_Feasibility          1.0000000000000001e-09
CPXPARAM_DetTimeLimit                            100000
CPXPARAM_MIP_Tolerances_MIPGap                   0.01
Warning:  No solution found from 1 MIP starts.
Retaining values of one MIP start for possible repair.
Tried aggregator 3 times.
MIP Presolve eliminated 88893 rows and 19911 columns.
MIP Presolve added 3338 rows and 0 columns.
MIP Presolve modified 24784 coefficients.
Aggregator did 12968 substitutions.
Reduced MIP has 24682 rows, 21064 columns, and 70474 nonzeros.
Reduced MIP has 8323 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.16 sec. (165.93 ticks)
Probing fixed 376 vars, tightened 4028 bounds.
Probing time = 0.03 sec. (18.21 ticks)
Tried aggregator 2 times.
Detecting symmetries...
MIP Presolve eliminated 849 rows and 755 columns.
MIP Presolve modified 2999 coefficients.
Aggregator did 36 substitutions.
Reduced MIP has 23797 rows, 20273 columns, and 67908 nonzeros.
Reduced MIP has 7946 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.06 sec. (91.25 ticks)
Probing fixed 0 vars, tightened 271 bounds.
Probing time = 0.06 sec. (22.21 ticks)
Clique table members: 44067.
MIP emphasis: balance optimality and feasibility.
MIP search method: dynamic search.
Parallel mode: opportunistic, using up to 16 threads.
Root relaxation solution time = 0.30 sec. (657.15 ticks)

        Nodes                                         Cuts/
   Node  Left     Objective  IInf  Best Integer    Best Bound    ItCnt     Gap

      0     0    78354.3907   182                  78354.3907     5956         
      0     0    77696.0433   182                    Cuts: 76     6013         
      0     0    77658.2894   182                    Cuts: 16     6032         
      0     0    77618.5719   182                    Cuts: 14     6039         
      0     0    77618.5719   182                     Cuts: 5     6043         
      0     0    77618.5719   182                 ZeroHalf: 1     6044         
      0     0    77618.5719   182                     Cuts: 4     6058         
Repair heuristic found nothing.
      0     2    77618.5719    72                  77618.5719     6058         
Elapsed time = 5.05 sec. (4245.64 ticks, tree = 0.02 MB, solutions = 0)
    186   100    53877.7100    50                  77074.5425     7075         
    484   254    73882.5858    24                  77074.5425     8405         
    792   379    40157.0423    31                  77074.5425     9954         
   1079   590    65645.5731    34                  77074.5425    12414         
   1322   842    57104.1954    21                  77074.5425    16525         
   1604  1200    59314.0759     5                  77074.5425    23778         
   1898  1443    65864.0254    33                  77074.5425    33535         
   2168  1455    39631.2781    23                  77074.5425    33673         
*  2189+ 1367                        51657.2918    77074.5425            49.20%
   3390  1652    51919.1121     8    51657.2918    77006.3559    47225   49.07%
Elapsed time = 16.55 sec. (7138.31 ticks, tree = 10.49 MB, solutions = 1)
   4812  2639    56075.6669    18    51657.2918    77005.5790    59025   49.07%

Performing restart 1

Repeating presolve.
Tried aggregator 3 times.
MIP Presolve eliminated 952 rows and 798 columns.
MIP Presolve modified 8016 coefficients.
Aggregator did 166 substitutions.
Reduced MIP has 22679 rows, 19309 columns, and 62068 nonzeros.
Reduced MIP has 7546 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.06 sec. (64.58 ticks)
Tried aggregator 3 times.
MIP Presolve eliminated 349 rows and 285 columns.
MIP Presolve modified 1067 coefficients.
Aggregator did 13 substitutions.
Reduced MIP has 22317 rows, 19011 columns, and 61020 nonzeros.
Reduced MIP has 7404 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.05 sec. (54.65 ticks)
Tried aggregator 2 times.
MIP Presolve eliminated 56 rows and 57 columns.
MIP Presolve modified 490 coefficients.
Aggregator did 14 substitutions.
Reduced MIP has 22247 rows, 18940 columns, and 60807 nonzeros.
Reduced MIP has 7376 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.05 sec. (82.31 ticks)
Represolve time = 0.45 sec. (302.15 ticks)
   4960     0    77593.9847   141    51657.2918     Cuts: 270    72264   43.12%
   4960     0    77593.2257   141    51657.2918     Cuts: 132    72345   43.12%
   4960     0    77581.9440   141    51657.2918      Cuts: 71    72398   43.12%
   4960     0    77581.2046   141    51657.2918      Cuts: 61    72452   43.12%
   4960     0    77581.2046   141    51657.2918      Cuts: 54    72481   43.12%
   4960     0    77581.2046   141    51657.2918      Cuts: 40    72524   43.12%
   4960     0    77581.2046   141    51657.2918     Cuts: 120    72598   37.29%
   4960     5    65693.2088    26    51657.2918    70921.6014    72648   37.29%
   5378   131    52547.9491    28    51657.2918    70921.6014    74112   37.29%
   6280   272    54839.0404    31    51657.2918    65693.2088    76068   27.17%
   6933   604    58391.0354    30    51657.2918    65693.2088    79561   27.17%
   7334  1333    62228.3581    58    51657.2918    65595.1383    88217   26.98%
   8745  2508    52160.3804    37    51657.2918    62601.2943   104691   21.19%
  10342  1936    51990.7400    34    51657.2918    61156.2145    96561   18.39%
  11842  3185    58780.9037    43    51657.2918    59126.9520   117674   14.46%
  13143  3986        cutoff          51657.2918    57578.7417   138146   11.46%
Elapsed time = 52.39 sec. (19926.53 ticks, tree = 29.24 MB, solutions = 1)
  14470  4587        cutoff          51657.2918    57548.9130   154892   11.41%
  16085  4533        cutoff          51657.2918    56835.9176   153506   10.02%
  17756  5125    52744.9766    37    51657.2918    56554.4211   164900    9.48%
  19085  5559    55340.8390    44    51657.2918    56145.0654   172193    8.69%
  19798  6605    52116.2932    31    51657.2918    56114.5883   191296    8.63%
  20271  7064    52949.6675    49    51657.2918    55966.8956   206188    8.34%
  21043  7025        cutoff          51657.2918    55763.6899   204422    7.95%
  22402  7081    51757.8888    32    51657.2918    55763.6899   206582    7.95%
  23758  8729    52054.4443    29    51657.2918    55537.0274   236905    7.51%
  25068  9179    54220.9271    33    51657.2918    55044.8580   250619    6.56%
Elapsed time = 84.47 sec. (29469.30 ticks, tree = 70.36 MB, solutions = 1)
  26383  9437    52057.8448    42    51657.2918    54798.2269   269376    6.08%
  27673  9297        cutoff          51657.2918    54798.2269   255204    6.08%
  28846  9421        cutoff          51657.2918    54525.0571   261880    5.55%
  30065  9586    53348.4239    46    51657.2918    54525.0571   275787    5.55%
  31324 10960    51872.0671    36    51657.2918    54497.8151   308015    5.50%
  32636 10016        cutoff          51657.2918    54497.8151   290763    5.50%
  33646 10532    52662.8068    33    51657.2918    54497.8151   300658    5.50%
  34637 10985    52120.2794    37    51657.2918    53821.0350   306705    4.19%
  35086 12321    52398.1581    24    51657.2918    53744.8863   331796    4.04%
  35838 12109    51909.8590    28    51657.2918    53712.5146   325711    3.98%
Elapsed time = 114.50 sec. (39011.26 ticks, tree = 92.90 MB, solutions = 1)
  37270 13596    51927.2419    39    51657.2918    53673.5546   356064    3.90%
* 38653+13898                        51952.2879    53673.5546             3.31%
  39086 13652    52167.3036    22    51952.2879    53673.5546   356735    3.31%
  40746 13316    52167.3036    28    51952.2879    53630.9222   348403    3.23%
  42335 14263    53463.9049    36    51952.2879    53463.9173   366690    2.91%
  44080 10075        cutoff          51952.2879    53414.7390   369938    2.81%
  45749 11636    52167.3036    31    51952.2879    53414.7390   394962    2.81%
  47103 12191        cutoff          51952.2879    53365.5103   406797    2.72%
  48274 12874    52540.6746    36    51952.2879    53251.7544   427473    2.50%
  49176 12466    53192.0798    39    51952.2879    53251.7544   414688    2.50%
  50053 13132    53146.4338    39    51952.2879    53226.6522   434902    2.45%
Elapsed time = 148.25 sec. (48554.52 ticks, tree = 99.15 MB, solutions = 2)
  50725 13340        cutoff          51952.2879    53226.6522   440519    2.45%
  51460 13422    53198.7876    38    51952.2879    53226.6522   444771    2.45%
  51953 13506        cutoff          51952.2879    53200.0440   450914    2.40%
  52344 13701        cutoff          51952.2879    53200.0440   455607    2.40%
  52621 14162        cutoff          51952.2879    53198.7876   473301    2.40%
  53149 14167        cutoff          51952.2879    53198.7876   477391    2.40%
  53753 13921    53192.0927    38    51952.2879    53198.7876   462354    2.40%
  54492 14173    53137.0112    40    51952.2879    53198.7876   468729    2.40%
  55305 14196        cutoff          51952.2879    53198.7876   474861    2.40%
  56037 14469    52965.7739    30    51952.2879    53198.7876   501442    2.40%
Elapsed time = 175.30 sec. (58110.46 ticks, tree = 109.02 MB, solutions = 2)
  56828 14348    53118.1769    40    51952.2879    53198.7876   495624    2.40%
  57603 14338    52781.6422    41    51952.2879    53198.7876   489580    2.40%
  58466 14468    52965.7739    31    51952.2879    53198.7876   503253    2.40%
  59286 14554    52359.3916    23    51952.2879    53198.7876   509188    2.40%
  60056 14651    52782.9359    39    51952.2879    53198.7746   513711    2.40%
  60873 15397    53016.8437    41    51952.2879    53198.7746   551286    2.40%
  61757 15348        cutoff          51952.2879    53198.7746   548169    2.40%
  62601 15232    52369.9767    25    51952.2879    53146.4338   543896    2.30%
  63185 15160    52757.3398    45    51952.2879    53146.4338   535827    2.30%
  63774 15515    53084.6574    41    51952.2879    53146.4338   556373    2.30%
Elapsed time = 199.47 sec. (67657.60 ticks, tree = 116.78 MB, solutions = 2)
  64280 15525        cutoff          51952.2879    53139.7389   556327    2.29%
  64754 15799    52965.7771    29    51952.2879    53139.7389   573950    2.29%
  65205 15922        cutoff          51952.2879    53124.8846   578906    2.26%
  65764 15946    52406.7933    22    51952.2879    53124.8846   579763    2.26%
  66555 16274        cutoff          51952.2879    53124.8846   589882    2.26%
  67732 17019        cutoff          51952.2879    53074.0722   623774    2.16%
  68732 16169        cutoff          51952.2879    53074.0722   586898    2.16%
  69850 16201        cutoff          51952.2879    53074.0722   587469    2.16%
  70954 16600    52359.3916    23    51952.2879    52990.7429   604233    2.00%
  71988 16426    53006.6624    44    51952.2879    52964.0050   594421    1.95%
Elapsed time = 226.50 sec. (77212.29 ticks, tree = 123.44 MB, solutions = 2)
  72746 16687    52158.3149    29    51952.2879    52964.0050   610639    1.95%
  73529 17363    52167.3036    28    51952.2879    52961.7752   639911    1.94%
  74077 17235    52274.6181    25    51952.2879    52900.8586   635813    1.83%
  74830 18355    52782.1662    39    51952.2879    52882.3208   673006    1.79%
  76098 17383    52128.7645    37    51952.2879    52882.3208   639371    1.79%
  77438 17946    52128.7645    37    51952.2879    52882.3208   658113    1.79%
  78590 17433        cutoff          51952.2879    52882.3208   641529    1.79%
  79676 17976    52033.0536    35    51952.2879    52807.2926   659131    1.65%
  80772 17746    52558.3596    36    51952.2879    52807.2926   649746    1.65%
  81849 17985        cutoff          51952.2879    52788.3370   660518    1.61%
Elapsed time = 259.94 sec. (86758.00 ticks, tree = 134.91 MB, solutions = 2)
  82846 18344        cutoff          51952.2879    52788.3370   669641    1.61%
  83835 18560        cutoff          51952.2879    52788.3370   702078    1.61%
  84870 18632        cutoff          51952.2879    52782.4246   697521    1.60%
  85695 18406        cutoff          51952.2879    52782.4246   682702    1.60%
  86535 18502    52173.2176    20    51952.2879    52748.8719   707209    1.53%
  87351 18570    52726.2842    31    51952.2879    52726.2874   700810    1.49%
  87974 18366        cutoff          51952.2879    52726.2874   719337    1.49%
  88516 18441    52462.8052    26    51952.2879    52726.2874   734481    1.49%
  88963 18414        cutoff          51952.2879    52726.2874   723809    1.49%
  89828 18428    52443.4893    24    51952.2879    52726.2874   736345    1.49%
Elapsed time = 269.31 sec. (99168.57 ticks, tree = 141.88 MB, solutions = 2)

Clique cuts applied:  1
Cover cuts applied:  4
Implied bound cuts applied:  46
Flow cuts applied:  52
Mixed integer rounding cuts applied:  15
Zero-half cuts applied:  2
Gomory fractional cuts applied:  6

Root node processing (before b&c):
  Real time             =    4.47 sec. (4192.91 ticks)
Parallel b&c, 16 threads:
  Real time             =  264.92 sec. (95820.08 ticks)
  Sync time (average)   =    0.57 sec.
  Wait time (average)   =    0.04 sec.
                          ------------
Total (root+branch&cut) =  269.39 sec. (100012.99 ticks)

Solution pool: 2 solutions saved.

MIP - Deterministic time limit exceeded, integer feasible:  Objective =  5.1952287876e+04
Current MIP best bound =  5.2693644194e+04 (gap = 741.356, 1.43%)
Solution time =  269.41 sec.  Iterations = 743655  Nodes = 89907 (18360)
Deterministic time = 100013.15 ticks  (371.23 ticks/sec)

CPLEX> Incumbent solution written to file 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmprfqf4oz1.cplex.sol'.
CPLEX> Exporting results... 
ERROR exporting segmented generator offers! Check export_generator_segment_offer().
Traceback (most recent call last):
  File "c:\Users\wenmi\Desktop\competitiveMPEC\write_results_competitive.py", line 84, in export_results
    is_MPEC,
  File "c:\Users\wenmi\Desktop\competitiveMPEC\write_results_competitive.py", line 317, in export_generator_segment_offer
    availablesegmentcapacity.append(format_6f(instance.availablesegmentcapacity[t, g, gs]))
  File "c:\Users\wenmi\Desktop\competitiveMPEC\write_results_competitive.py", line 141, in format_6f
    formatted_data = "{:0.6f}".format(input_data)
TypeError: unsupported format string passed to _GeneralExpressionData.__format__


           Launching Python debugger (PDB)...
           To execute multi-line statements in PDB, type this:
                import code; code.interact(local=vars())
           (The command launches an interactive Python session with all the local variables available.)
           To exit the interactive session and continue script execution, press Ctrl+D.
           
> c:\users\wenmi\desktop\competitivempec\write_results_competitive.py(141)format_6f()
-> formatted_data = "{:0.6f}".format(input_data)
(Pdb) 