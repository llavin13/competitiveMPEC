RT is False
Default write of storage_offers_DA.csv just to have a file (but constraint should be inactive)
Reading model...
...model read.
creating competitive generators file...
...competitive generators recorded.
Loading data...
.. day-ahead data read.
Compiling instance...
...instance created.
Creating Offer Mitigation (model will solve as dispatch if TRUE)...
...storage offer mitigation file created
Converting model to MPEC...
...converted
NOTE: initial MIP solve with only storage competitive to get feasible solution
Solving...

Welcome to IBM(R) ILOG(R) CPLEX(R) Interactive Optimizer 12.10.0.0
  with Simplex, Mixed Integer & Barrier Optimizers
5725-A06 5725-A29 5724-Y48 5724-Y49 5724-Y54 5724-Y55 5655-Y21
Copyright IBM Corp. 1988, 2019.  All Rights Reserved.

Type 'help' for a list of available commands.
Type 'help' followed by a command name for more
information on commands.

CPLEX> Logfile 'cplex.log' closed.
Logfile 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpmn3fy7md.cplex.log' open.
CPLEX> New value for parallel optimization mode: -1
CPLEX> New value for mixed integer optimality gap tolerance: 0.05
CPLEX> New value for feasibility tolerance: 1e-09
CPLEX> New value for deterministic time limit in ticks: 100000
CPLEX> Problem 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmplgc4gyld.pyomo.lp' read.
Read time = 0.16 sec. (14.50 ticks)
CPLEX> Problem name         : C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmplgc4gyld.pyomo.lp
Objective sense      : Maximize
Variables            :   53805  [Nneg: 1,  Box: 22000,  Free: 4464,
                                 Binary: 27340]
Objective nonzeros   :    9019
Linear constraints   :  123205  [Less: 41346,  Greater: 59096,  Equal: 22763]
  Nonzeros           :  291718
  RHS nonzeros       :   67460

Variables            : Min LB: -5000.000        Max UB: 1000000.       
Objective nonzeros   : Min   : 0.1000000        Max   : 2500.000       
Linear constraints   :
  Nonzeros           : Min   : 0.1000000        Max   : 1000000.       
  RHS nonzeros       : Min   : 0.1000000        Max   : 1000000.       
CPLEX> Version identifier: 12.10.0.0 | 2019-11-26 | 843d4de2ae
CPXPARAM_Parallel                                -1
CPXPARAM_Simplex_Tolerances_Feasibility          1.0000000000000001e-09
CPXPARAM_DetTimeLimit                            100000
CPXPARAM_MIP_Tolerances_MIPGap                   0.050000000000000003
Tried aggregator 3 times.
MIP Presolve eliminated 88893 rows and 19191 columns.
MIP Presolve added 3338 rows and 0 columns.
MIP Presolve modified 24784 coefficients.
Aggregator did 12968 substitutions.
Reduced MIP has 24682 rows, 21064 columns, and 70474 nonzeros.
Reduced MIP has 8323 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.16 sec. (165.58 ticks)
Probing fixed 376 vars, tightened 4028 bounds.
Probing time = 0.03 sec. (18.21 ticks)
Tried aggregator 2 times.
Detecting symmetries...
MIP Presolve eliminated 849 rows and 755 columns.
MIP Presolve modified 2999 coefficients.
Aggregator did 36 substitutions.
Reduced MIP has 23797 rows, 20273 columns, and 67908 nonzeros.
Reduced MIP has 7946 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.06 sec. (91.25 ticks)
Probing fixed 0 vars, tightened 271 bounds.
Probing time = 0.06 sec. (22.21 ticks)
Clique table members: 44067.
MIP emphasis: balance optimality and feasibility.
MIP search method: dynamic search.
Parallel mode: opportunistic, using up to 16 threads.
Root relaxation solution time = 0.33 sec. (621.96 ticks)

        Nodes                                         Cuts/
   Node  Left     Objective  IInf  Best Integer    Best Bound    ItCnt     Gap

      0     0     7078.7690    96                   7078.7690     5518         
      0     0     7078.7690    96                     Cuts: 9     5521         
      0     0     7077.4920    96                     Cuts: 4     5527         
      0     0     7077.4573    96                     Cuts: 4     5534         
      0     0     7076.1264    96                     Cuts: 2     5536         
      0     0     7076.1264    96                   Covers: 1     5537         
      0     7    infeasible                         7069.3359     5579         
Elapsed time = 3.16 sec. (2711.42 ticks, tree = 0.02 MB, solutions = 1)
*    39    11      integral     0     7050.6701     7069.3359     5866    0.26%

Cover cuts applied:  4
Implied bound cuts applied:  2
Flow cuts applied:  11
Gomory fractional cuts applied:  3

Root node processing (before b&c):
  Real time             =    2.77 sec. (2689.59 ticks)
Parallel b&c, 16 threads:
  Real time             =    0.55 sec. (212.16 ticks)
  Sync time (average)   =    0.18 sec.
  Wait time (average)   =    0.00 sec.
                          ------------
Total (root+branch&cut) =    3.31 sec. (2901.74 ticks)

Solution pool: 2 solutions saved.

MIP - Integer optimal, tolerance (0.05/1e-06):  Objective =  7.0506701473e+03
Current MIP best bound =  7.0693358514e+03 (gap = 18.6657, 0.26%)
Solution time =    3.31 sec.  Iterations = 6148  Nodes = 50 (5)
Deterministic time = 2901.89 ticks  (875.91 ticks/sec)

CPLEX> Incumbent solution written to file 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpr_633qmi.cplex.sol'.
CPLEX> NOTE: no warmstart specified for MIP iteration, default behavior is true
NOTE: resolving with all competitive generators using storage-only solution to warmstart
Solving...

Welcome to IBM(R) ILOG(R) CPLEX(R) Interactive Optimizer 12.10.0.0
  with Simplex, Mixed Integer & Barrier Optimizers
5725-A06 5725-A29 5724-Y48 5724-Y49 5724-Y54 5724-Y55 5655-Y21
Copyright IBM Corp. 1988, 2019.  All Rights Reserved.

Type 'help' for a list of available commands.
Type 'help' followed by a command name for more
information on commands.

CPLEX> Logfile 'cplex.log' closed.
Logfile 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmp5zscim_l.cplex.log' open.
CPLEX> New value for parallel optimization mode: -1
CPLEX> New value for mixed integer optimality gap tolerance: 0.05
CPLEX> New value for feasibility tolerance: 1e-09
CPLEX> New value for deterministic time limit in ticks: 100000
CPLEX> Problem 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmp96vxxk9u.pyomo.lp' read.
Read time = 0.16 sec. (14.52 ticks)
CPLEX> MIP start file 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpjmathw5r.cplex.mst' read.
CPLEX> Problem name         : C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmp96vxxk9u.pyomo.lp
Objective sense      : Maximize
Variables            :   54525  [Nneg: 1,  Box: 22720,  Free: 4464,
                                 Binary: 27340]
Objective nonzeros   :    9715
Linear constraints   :  123205  [Less: 41346,  Greater: 59096,  Equal: 22763]
  Nonzeros           :  291718
  RHS nonzeros       :   67460

Variables            : Min LB: -5000.000        Max UB: 1000000.       
Objective nonzeros   : Min   : 0.1000000        Max   : 2500.000       
Linear constraints   :
  Nonzeros           : Min   : 0.1000000        Max   : 1000000.       
  RHS nonzeros       : Min   : 0.1000000        Max   : 1000000.       
CPLEX> Version identifier: 12.10.0.0 | 2019-11-26 | 843d4de2ae
CPXPARAM_Parallel                                -1
CPXPARAM_Simplex_Tolerances_Feasibility          1.0000000000000001e-09
CPXPARAM_DetTimeLimit                            100000
CPXPARAM_MIP_Tolerances_MIPGap                   0.050000000000000003
Warning:  No solution found from 1 MIP starts.
Retaining values of one MIP start for possible repair.
Tried aggregator 3 times.
MIP Presolve eliminated 88893 rows and 19911 columns.
MIP Presolve added 3338 rows and 0 columns.
MIP Presolve modified 24784 coefficients.
Aggregator did 12968 substitutions.
Reduced MIP has 24682 rows, 21064 columns, and 70474 nonzeros.
Reduced MIP has 8323 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.16 sec. (165.93 ticks)
Probing fixed 376 vars, tightened 4028 bounds.
Probing time = 0.05 sec. (18.21 ticks)
Tried aggregator 2 times.
Detecting symmetries...
MIP Presolve eliminated 849 rows and 755 columns.
MIP Presolve modified 2999 coefficients.
Aggregator did 36 substitutions.
Reduced MIP has 23797 rows, 20273 columns, and 67908 nonzeros.
Reduced MIP has 7946 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.06 sec. (91.25 ticks)
Probing fixed 0 vars, tightened 271 bounds.
Probing time = 0.06 sec. (22.21 ticks)
Clique table members: 44067.
MIP emphasis: balance optimality and feasibility.
MIP search method: dynamic search.
Parallel mode: opportunistic, using up to 16 threads.
Root relaxation solution time = 0.33 sec. (657.15 ticks)

        Nodes                                         Cuts/
   Node  Left     Objective  IInf  Best Integer    Best Bound    ItCnt     Gap

      0     0    78354.3907   182                  78354.3907     5956         
      0     0    77696.0433   182                    Cuts: 76     6013         
      0     0    77658.2894   182                    Cuts: 16     6032         
      0     0    77618.5719   182                    Cuts: 14     6039         
      0     0    77618.5719   182                     Cuts: 5     6043         
      0     0    77618.5719   182                 ZeroHalf: 1     6044         
      0     0    77618.5719   182                     Cuts: 4     6058         
Repair heuristic found nothing.
      0     2    77618.5719    72                  77618.5719     6058         
Elapsed time = 4.92 sec. (4245.64 ticks, tree = 0.02 MB, solutions = 0)
    208    72    68012.7048    48                  77074.5425     6768         
    512   358    72997.8911    48                  77074.5425     9646         
    818   515    65208.2118    15                  77074.5425    11660         
   1096   834    60341.4058    19                  77074.5425    14931         
   1370   949    57809.4159    25                  77074.5425    16237         
   1663  1211    59514.8174    35                  77074.5425    20756         
   1910  1587    59684.2441    22                  77074.5425    29940         
   2177  1522    60322.7152    23                  77074.5425    28482         
   2414  1966    48945.3464    18                  77074.5425    40826         
   3484  2876    56155.3426     7                  77074.5425    55110         
Elapsed time = 16.78 sec. (7355.47 ticks, tree = 20.44 MB, solutions = 0)
   4517  3222    55423.4254    11                  77074.5425    60792         
*  4562  3207      integral     0    53408.2885    77074.5425    60670   44.31%

Performing restart 1

Repeating presolve.
Tried aggregator 3 times.
MIP Presolve eliminated 988 rows and 828 columns.
MIP Presolve modified 7935 coefficients.
Aggregator did 169 substitutions.
Reduced MIP has 22640 rows, 19276 columns, and 61966 nonzeros.
Reduced MIP has 7531 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.06 sec. (65.33 ticks)
Tried aggregator 3 times.
MIP Presolve eliminated 345 rows and 283 columns.
MIP Presolve modified 965 coefficients.
Aggregator did 7 substitutions.
Reduced MIP has 22288 rows, 18986 columns, and 60944 nonzeros.
Reduced MIP has 7390 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.05 sec. (53.83 ticks)
Tried aggregator 2 times.
MIP Presolve eliminated 56 rows and 57 columns.
MIP Presolve modified 438 coefficients.
Aggregator did 15 substitutions.
Reduced MIP has 22217 rows, 18914 columns, and 60730 nonzeros.
Reduced MIP has 7362 binaries, 0 generals, 0 SOSs, and 0 indicators.
Presolve time = 0.06 sec. (84.69 ticks)
Represolve time = 0.47 sec. (308.33 ticks)
   4659     0    77593.9362   144    53408.2885     Cuts: 383    87893   38.18%
   4659     0    77593.5874   144    53408.2885     Cuts: 113    87954   38.18%
   4659     0    77592.3058   144    53408.2885      Cuts: 96    88014   38.18%
   4659     0    77585.2848   144    53408.2885      Cuts: 67    88076   38.18%
   4659     0    77581.4702   144    53408.2885      Cuts: 66    88126   38.18%
   4659     0    77580.7308   144    53408.2885      Cuts: 52    88169   38.18%
   4659     0    77580.7308   144    53408.2885      Cuts: 77    88244   38.18%
   4659     3    68549.6869    46    53408.2885    73797.9339    88291   38.18%
   4967    37    57490.8885    47    53408.2885    68842.2242    88865   28.90%
   5469   346    62330.2378    48    53408.2885    66966.7527    92344   25.39%
   6061   183    55077.4808    21    53408.2885    66770.6183    90851   25.02%
   6756   574    65529.0553    51    53408.2885    66770.6183    94527   25.02%
   7680  1156        cutoff          53408.2885    66618.0596   100633   24.73%
   8410   728    53824.5336    57    53408.2885    66618.0596    96185   24.73%
   8880  1775    56576.0843    51    53408.2885    65529.0553   107458   22.69%
   9441  2581    55064.3211    31    53408.2885    65529.0553   114220   22.69%
Elapsed time = 51.61 sec. (20084.74 ticks, tree = 18.21 MB, solutions = 1)
  10070  2380    60316.4907    42    53408.2885    65529.0553   112772   22.69%
  10746  2643    53945.7391    43    53408.2885    65529.0553   114800   22.69%
  11402  3872    57935.9398    35    53408.2885    65529.0553   124116   22.69%
  12031  3552    54320.8445    36    53408.2885    65503.9307   121611   22.65%
  12586  4430    55376.5963    29    53408.2885    65503.9307   128244   22.65%
  13184  4377        cutoff          53408.2885    65503.9307   127924   22.65%
  13757  4742    57977.2151    22    53408.2885    65503.9307   130102   22.65%
  14353  5195    58079.2709    37    53408.2885    65503.9307   133921   22.65%
  14895  5877    54480.8079    38    53408.2885    65503.9307   138375   22.65%
  15388  6547    64129.3484    44    53408.2885    65503.9307   142086   22.65%
Elapsed time = 81.67 sec. (29632.81 ticks, tree = 49.96 MB, solutions = 1)
  15763  6580    54802.0593    38    53408.2885    65503.9307   142244   22.65%
  16202  7768    55982.1316    29    53408.2885    65503.9307   148612   22.65%
  16755  8338    56879.6175    23    53408.2885    65503.9307   151706   22.65%
  17259  8157    56795.8724    33    53408.2885    64879.2063   150738   21.48%
  17816  8470        cutoff          53408.2885    64868.9613   152609   21.46%
  18415  9476        cutoff          53408.2885    64868.9613   157504   21.46%
  19021 10181        cutoff          53408.2885    64868.9613   161729   21.46%
  19663  8991        cutoff          53408.2885    64868.9613   155069   21.46%
  20331 10237        cutoff          53408.2885    64820.4926   162168   21.37%
  20938 10832    58341.7410    31    53408.2885    64820.4926   165479   21.37%
Elapsed time = 111.70 sec. (39181.46 ticks, tree = 84.55 MB, solutions = 1)
  21537 11011    54385.9368    15    53408.2885    64820.4926   166535   21.37%
  22144 11292    61043.9970    40    53408.2885    64813.7977   168118   21.36%
  22776 12656    59612.8542    38    53408.2885    64667.1164   179563   21.08%
  23380 12014    60543.0867    34    53408.2885    64667.1164   173937   21.08%
  23974 12980    56841.9732    31    53408.2885    64660.4215   182069   21.07%
  24505 12731        cutoff          53408.2885    64660.4215   180332   21.07%
  25018 12963    57189.7906    38    53408.2885    64660.4215   181637   21.07%
  25586 14487        cutoff          53408.2885    64441.4395   198519   20.66%
  26097 14198    63929.3495    39    53408.2885    64441.4395   194480   20.66%
  26752 14767    53490.8738    31    53408.2885    64435.5143   201571   20.65%
Elapsed time = 141.67 sec. (48725.72 ticks, tree = 115.83 MB, solutions = 1)
  27412 15366    53778.7385    48    53408.2885    64401.4428   208862   20.58%
  28082 15000    53495.8257    39    53408.2885    64401.4428   204113   20.58%
  28762 14846        cutoff          53408.2885    64251.7876   202452   20.30%
  29414 15445    53507.5780    24    53408.2885    64163.3298   209489   20.14%
  30081 16479    54327.3305    14    53408.2885    64128.8146   222147   20.07%
  30748 16366    55383.9667    48    53408.2885    64128.8146   220389   20.07%
  31410 17092    54317.6959    38    53408.2885    64090.4584   229071   20.00%
  32052 17402    54775.9190    41    53408.2885    63985.3127   233129   19.80%
  32596 17451    58929.5294    38    53408.2885    63985.3127   232726   19.80%
  33179 17481    61826.4678    47    53408.2885    63944.0503   233065   19.73%
Elapsed time = 171.67 sec. (58274.01 ticks, tree = 138.10 MB, solutions = 1)
  33763 19402    61042.7293    43    53408.2885    63944.0503   251096   19.73%
  34173 18599        cutoff          53408.2885    63909.0630   243627   19.66%
  34690 18512    57750.6268    33    53408.2885    63909.0630   243357   19.66%
  35184 19492    53785.7384    33    53408.2885    63866.2567   251640   19.58%
  35790 20813    61060.3453    35    53408.2885    63862.9507   263314   19.57%
  36448 20758    56994.4380    35    53408.2885    63862.9507   263088   19.57%
  37119 19540    56562.2341    38    53408.2885    63751.1103   252280   19.37%
  37782 21925    56956.8512    38    53408.2885    63751.1103   274177   19.37%
  38460 21548    56555.1951    37    53408.2885    63722.2575   270128   19.31%
  39168 21248        cutoff          53408.2885    63657.4707   266877   19.19%
Elapsed time = 204.41 sec. (67826.72 ticks, tree = 167.99 MB, solutions = 1)
  39829 23149    60917.9578    48    53408.2885    63657.4707   287126   19.19%
  40512 22991        cutoff          53408.2885    63657.4707   285253   19.19%
  41158 22530    54061.0657    23    53408.2885    63515.3611   280250   18.92%
  41827 23593    60428.7877    39    53408.2885    63439.9821   292291   18.78%
  42534 24522    60803.2085    35    53408.2885    63439.9821   301493   18.78%
  43203 25336    53998.6303    38    53408.2885    63434.4839   309836   18.77%
  43915 24282    55209.6015    53    53408.2885    63414.8575   299287   18.74%
  44677 24591    58988.3859    39    53408.2885    63414.8575   302274   18.74%
  45469 24615    56731.5325    41    53408.2885    63414.8575   302563   18.74%
  46198 25017    53714.4619    23    53408.2885    63414.8575   306629   18.74%
Elapsed time = 236.23 sec. (77372.22 ticks, tree = 197.96 MB, solutions = 1)
  46891 26211    infeasible          53408.2885    63374.4474   317281   18.66%
  47616 25622    53989.7018    19    53408.2885    63374.4474   312562   18.66%
  48259 26268    57364.1029    42    53408.2885    63374.4474   317827   18.66%
  48893 28169    57835.7251    39    53408.2885    63302.5604   341266   18.53%
  49411 27180    53852.4458    41    53408.2885    63302.5604   329431   18.53%
  49853 27030    57722.3827    46    53408.2885    62967.7604   327229   17.90%
  50271 27784    58946.1142    46    53408.2885    62849.6922   335790   17.68%
  50857 27696    60258.1276    49    53408.2885    62849.6922   335656   17.68%
  51497 29245    54829.3315    48    53408.2885    62849.6922   355306   17.68%
  52102 29454        cutoff          53408.2885    62746.4051   357748   17.48%
Elapsed time = 263.45 sec. (86920.16 ticks, tree = 233.08 MB, solutions = 1)
  52709 29398    56783.2475    47    53408.2885    62746.4051   356656   17.48%
  53350 28884    57371.7184    36    53408.2885    62746.4051   350962   17.48%
  53930 29845    53628.7503    43    53408.2885    62521.4123   363070   17.06%
  54517 31229    53730.5070    26    53408.2885    62521.4123   378386   17.06%
  55121 31253    59076.6322    32    53408.2885    62521.4123   378598   17.06%
  55769 32095    55925.5202    35    53408.2885    62521.4123   387986   17.06%
  56398 29844    54064.0530    39    53408.2885    62521.4123   363427   17.06%
  57019 31991    59048.8196    50    53408.2885    62521.4123   386562   17.06%
  57672 32454        cutoff          53408.2885    62521.4123   391658   17.06%
  59544 32720    53870.8187    36    53408.2885    62514.7174   394225   17.05%
Elapsed time = 290.50 sec. (99327.71 ticks, tree = 258.93 MB, solutions = 1)

GUB cover cuts applied:  1
Cover cuts applied:  7
Implied bound cuts applied:  11
Flow cuts applied:  45
Mixed integer rounding cuts applied:  4
Zero-half cuts applied:  1
Gomory fractional cuts applied:  10

Root node processing (before b&c):
  Real time             =    4.33 sec. (4191.79 ticks)
Parallel b&c, 16 threads:
  Real time             =  286.36 sec. (95864.10 ticks)
  Sync time (average)   =    0.99 sec.
  Wait time (average)   =    0.04 sec.
                          ------------
Total (root+branch&cut) =  290.69 sec. (100055.88 ticks)

Solution pool: 1 solution saved.

MIP - Deterministic time limit exceeded, integer feasible:  Objective =  5.3408288525e+04
Current MIP best bound =  6.2364117219e+04 (gap = 8955.83, 16.77%)
Solution time =  290.69 sec.  Iterations = 416846  Nodes = 59673 (35684)
Deterministic time = 100056.04 ticks  (344.21 ticks/sec)

CPLEX> Incumbent solution written to file 'C:\Users\wenmi\Desktop\competitiveMPEC\logs\tmpniw3w1ne.cplex.sol'.
CPLEX> Exporting results... 
ERROR exporting segmented generator offers! Check export_generator_segment_offer().
Traceback (most recent call last):
  File "c:\Users\wenmi\Desktop\competitiveMPEC\write_results_competitive.py", line 84, in export_results
    is_MPEC,
  File "c:\Users\wenmi\Desktop\competitiveMPEC\write_results_competitive.py", line 317, in export_generator_segment_offer
    available_segment_capacity.append(format_6f(instance.availablesegmentcapacity[t, g, gs]))
  File "c:\Users\wenmi\Desktop\competitiveMPEC\write_results_competitive.py", line 141, in format_6f
    formatted_data = "{:0.6f}".format(input_data)
TypeError: unsupported format string passed to _GeneralExpressionData.__format__


           Launching Python debugger (PDB)...
           To execute multi-line statements in PDB, type this:
                import code; code.interact(local=vars())
           (The command launches an interactive Python session with all the local variables available.)
           To exit the interactive session and continue script execution, press Ctrl+D.
           
> c:\users\wenmi\desktop\competitivempec\write_results_competitive.py(141)format_6f()
-> formatted_data = "{:0.6f}".format(input_data)
(Pdb) 